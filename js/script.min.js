!function(){"use strict";async function e(e){let t=await fetch(e);return await t.json()}function t(e){let t=new Image;return new Promise(((a,o)=>{t.onload=()=>{a(t)},t.src=e}))}function a(e){let t=new Audio;return t.src=e,t}sortable("#layers");let o=document.querySelector("canvas"),i=document.querySelector("audio"),r=o.getContext("2d");async function n(){let{value:n,room:s}=this.selectedOptions[0];console.log(n,s),o.room=s,o.width=s.width,o.height=s.height,this.frame||(this.frame=0),r.fillRect(0,0,o.width,o.height);let l=s.spriteSheet="string"==typeof s.spriteSheet?await e(s.spriteSheet):s.spriteSheet,c=s.layout;for(let e in s.media){let o=s.media[e];if("object"==typeof o){console.log("ok");continue}let i=o.split("."),r=i[i.length-1];switch(r){case"png":s.media[e]=await t(o);break;case"mp3":s.media[e]=await a(o);break;default:console.warn("No File handler for "+r+" files")}}l.images&&(l.images=await Promise.all(l.images.map((async e=>"string"==typeof e?await t(e):e)))),null!=s.media.music?i.src=s.media.music.src:i.src="",c&&(Array.isArray(c.playground)&&Array.isArray(c.playground[0])&&(c.playground=[].concat.apply([],c.playground)),c.playground.sort(((e,t)=>e.y-t.y)))}async function s(){let t=document.getElementById("select-room"),a=await async function(t){let a=await e("https://api.boxcrittersmods.ga/manifests");return await e(a[t].src)}("rooms");for(var o of(t.addEventListener("change",n),a)){o.roomId=o.roomId||o.id,o.name=o.name||o.roomId;let e=document.createElement("option");e.value=o.roomId,e.text=o.name,e.room=o,t.add(e,null)}n.call(t)}o.style.width="100%",setTimeout((()=>{s()}),10)}();
//# sourceMappingURL=script.min.js.map